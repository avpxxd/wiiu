<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <title>Wii U - Internet browser specs - sample</title>
    <meta name="description" content="Sample page to obtain values from the Wii U GamePad using the Wii U Internet browser.">
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
            margin: 8px;
            background: #fff;
        }
        h1 {
            font-size: 26px;
            margin-bottom: 20px;
        }
        #warning {
            font-size: 12px;
            color: red;
            margin-bottom: 20px;
        }
        table {
            border-collapse: collapse;
        }
        table td {
            padding: 2px 8px;
            font-size: 10px;
        }
        .bg-light {
            background-color: #eee;
        }
        .bg-white {
            background-color: #fff;
        }
        svg {
            border: 1px solid #000;
        }
    </style>
</head>
<body>
    <div style="min-height: 600px;">
        <h1>Sample page to obtain values from the Wii U GamePad.</h1>
        <div id="warning">Either the Wii U Internet Browser is not being used, or the values from the Wii U GamePad could not properly be obtained.</div>
        
        <table id="Buttons" style="position: absolute; left: 8px; top: 100px; font-size: 10px;">
            <tbody id="buttonRows"></tbody>
        </table>
        
        <table style="position: absolute; top: 96px; left: 240px">
            <tr><td>Touch position within the content area.</td></tr>
            <tr id="touchpanel"><td>No touch detected.</td></tr>
        </table>
        
        <table style="position: absolute; top: 140px; left: 240px">
            <tr id="stick"><td></td></tr>
        </table>
        
        <table style="position: absolute; top: 300px; left: 240px;">
            <tr><td>From the Front</td><td>From the Top</td></tr>
            <tr>
                <td>
                    <svg id="directionFront" width="128" height="128" viewBox="-64 -64 128 128">
                        <line x1="0" y1="0" x2="64" y2="0" stroke="red"/>
                        <line x1="0" y1="0" x2="0" y2="-64" stroke="green"/>
                        <line x1="0" y1="0" x2="0" y2="0" stroke="blue"/>
                    </svg>
                </td>
                <td>
                    <svg id="directionTop" width="128" height="128" viewBox="-64 -64 128 128">
                        <line x1="0" y1="0" x2="64" y2="0" stroke="red"/>
                        <line x1="0" y1="0" x2="0" y2="0" stroke="green"/>
                        <line x1="0" y1="0" x2="0" y2="64" stroke="blue"/>
                    </svg>
                </td>
            </tr>
        </table>
        
        <table style="position: absolute; top: 100px; left: 600px;">
            <tr id="gyro"><td></td></tr>
            <tr id="angle"><td></td></tr>
            <tr id="acc"><td></td></tr>
        </table>
    </div>

    <script>
        const buttonLabels = [
            "", "STICK_L_EMULATION_LEFT", "STICK_L_EMULATION_RIGHT", "STICK_L_EMULATION_UP",
            "STICK_L_EMULATION_DOWN", "STICK_R_EMULATION_LEFT", "STICK_R_EMULATION_RIGHT",
            "STICK_R_EMULATION_UP", "STICK_R_EMULATION_DOWN", "", "", "", "",
            "STICK_L", "STICK_R", "", "A", "B", "X", "Y", "LEFT", "RIGHT", "UP", "DOWN",
            "ZL", "ZR", "L", "R", "PLUS", "MINUS", "", ""
        ];

        function createCircleSvg(id, xname, yname) {
            const svgNS = "http://www.w3.org/2000/svg";
            const svg = document.createElementNS(svgNS, "svg");
            svg.setAttribute("width", "150");
            svg.setAttribute("height", "150");
            svg.setAttribute("viewBox", "-40 -40 80 80");
            svg.setAttribute("id", id);

            const circle = document.createElementNS(svgNS, "circle");
            circle.setAttribute("cx", "0");
            circle.setAttribute("cy", "0");
            circle.setAttribute("r", "32");
            circle.setAttribute("stroke", "gray");
            circle.setAttribute("fill", "white");
            circle.setAttribute("stroke-width", "1");
            svg.appendChild(circle);

            const xaxis = document.createElementNS(svgNS, "line");
            xaxis.setAttribute("x1", "-32");
            xaxis.setAttribute("x2", "32");
            xaxis.setAttribute("y1", "0");
            xaxis.setAttribute("y2", "0");
            xaxis.setAttribute("stroke", "gray");
            xaxis.setAttribute("stroke-width", "0.5");
            svg.appendChild(xaxis);

            const yaxis = document.createElementNS(svgNS, "line");
            yaxis.setAttribute("x1", "0");
            yaxis.setAttribute("x2", "0");
            yaxis.setAttribute("y1", "-32");
            yaxis.setAttribute("y2", "32");
            yaxis.setAttribute("stroke", "gray");
            yaxis.setAttribute("stroke-width", "0.5");
            svg.appendChild(yaxis);

            const value = document.createElementNS(svgNS, "line");
            value.setAttribute("x1", "0");
            value.setAttribute("x2", "0");
            value.setAttribute("y1", "0");
            value.setAttribute("y2", "0");
            value.setAttribute("stroke", "red");
            value.setAttribute("stroke-width", "3");
            value.setAttribute("id", "value");
            svg.appendChild(value);

            const titleText = document.createElementNS(svgNS, "text");
            titleText.setAttribute("x", "-40");
            titleText.setAttribute("y", "-30");
            titleText.setAttribute("font-size", "10");
            titleText.textContent = id;
            svg.appendChild(titleText);

            const valueText = document.createElementNS(svgNS, "text");
            valueText.setAttribute("x", "-40");
            valueText.setAttribute("y", "38");
            valueText.setAttribute("font-size", "10");
            valueText.setAttribute("id", "valueText");
            valueText.textContent = "0.0000";
            svg.appendChild(valueText);

            if (xname) {
                const xText = document.createElementNS(svgNS, "text");
                xText.setAttribute("x", "32");
                xText.setAttribute("y", "8");
                xText.setAttribute("font-size", "8");
                xText.textContent = xname;
                svg.appendChild(xText);
            }

            if (yname) {
                const yText = document.createElementNS(svgNS, "text");
                yText.setAttribute("x", "0");
                yText.setAttribute("y", "-32");
                yText.setAttribute("font-size", "8");
                yText.textContent = yname;
                svg.appendChild(yText);
            }

            return svg;
        }

        function init() {
            // Create button rows
            const buttonRows = document.getElementById('buttonRows');
            buttonLabels.forEach((label, i) => {
                const row = document.createElement('tr');
                row.className = i < 16 ? 'bg-light' : 'bg-white';
                row.innerHTML = `<td>${label}</td><td>0</td>`;
                buttonRows.appendChild(row);
            });

            // Create stick visualizations
            const stickTd = document.getElementById("stick").getElementsByTagName("td")[0];
            stickTd.appendChild(createCircleSvg("lStick"));
            stickTd.appendChild(createCircleSvg("rStick"));

            // Create gyro visualizations
            const gyroTd = document.getElementById("gyro").getElementsByTagName("td")[0];
            ["gyroX", "gyroY", "gyroZ"].forEach(id => {
                gyroTd.appendChild(createCircleSvg(id));
            });

            // Create angle visualizations
            const angleTd = document.getElementById("angle").getElementsByTagName("td")[0];
            ["angleX", "angleY", "angleZ"].forEach(id => {
                angleTd.appendChild(createCircleSvg(id));
            });

            // Create accelerometer visualizations
            const accTd = document.getElementById("acc").getElementsByTagName("td")[0];
            accTd.appendChild(createCircleSvg("AccXY", "X", "Y"));
            accTd.appendChild(createCircleSvg("AccZY", "Z", "Y"));
        }

        function update() {
            // Check for Wii U gamepad data
            if (window.wiiu && window.wiiu.gamepad) {
                const state = window.wiiu.gamepad.update();
                if (state && state.isEnabled && state.isDataValid) {
                    document.getElementById("warning").style.display = "none";
                    // Update UI with real data here
                    return;
                }
            }
            // If we get here, we're not on a Wii U or data is invalid
            document.getElementById("warning").style.display = "block";
        }

        // Initialize and start update loop
        init();
        setInterval(update, 20);
    </script>
</body>
</html>
